{% extends "base.html" %}

{% block title %} :-T Articles {% endblock %}

{% block content %}

{% include 'index-content.html' %}

<a href="archives.html">Article Archives</a>

<hr/>

{% if articles %}

    {% for article in articles_page.object_list %}
        {# First item #}
        {% if loop.first and not articles_page.has_previous() %}
            <h1>
                <a href="{{ SITEURL }}/{{ article.url }}"
                    >{{ article.title }}</a>
            </h1>

            {% include 'lib/article_info.html' %}

            {{ article.content }}

            {% if loop.length == 1 %}
                {% include 'pagination.html' %}
            {% endif %}

            {% if loop.length > 1 %}
                <h1>Older articles</h1>
                <hr/>
                <ol>
            {% endif %}

        {# other items #}
        {% else %}
            {% if loop.first and articles_page.has_previous %}
                <ol start="{{ articles_paginator.per_page -1 }}">
            {% endif %}
            <li>
                <h1>
                    <a href="{{ SITEURL }}/{{ article.url }}"
                        rel="bookmark"
                        title="Permalink to {{ article.title}}"
                        >{{ article.title }}</a>
                </h1>

                {% include 'lib/article_info.html' %}

                {{ article.summary }}

                <a class="readmore"
                    href="{{ SITEURL }}/{{ article.url }}"
                    >read more</a>

            </li>
        {% endif %}

        {% if loop.last and (articles_page.has_previous()
           or not articles_page.has_previous() and loop.length > 1) %}

            {% include 'pagination.html' %}

        {% endif %}


    {% endfor %}

    {% if loop.length > 1 or articles_page.has_previous() %}
        </ol><!-- Close list for older articles -->
    {% endif %}

{% else %}

    <h2>Pages</h2>

    {% for page in PAGES %}
        <li>
            <a href="{{ SITEURL }}/pages/{{ page.url }}">{{ page.title }}</a>
        </li>
    {% endfor %}

{% endif %}

{% endblock content %}

